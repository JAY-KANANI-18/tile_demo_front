<div class="header bg-gradient-skyblue p-3 pb-7 pt-7">
  <div class="container-fluid">
    <div class="header">
      <h1>Search Image</h1>
      <button (click)="logOut()" class="btn btn-danger">LogOut</button>

    </div>
  </div>
</div>

<ng-template #content let-modal>
  <div class="bg-aliceblue modal-div">
    <div class="modal-header">
      <h4>Add Image</h4>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>

    <div class="modal-body">
      <form role="form" name="vehicleForm" [formGroup]="vehicleForm">

        <div class="text-center">

          <!-- <img *ngIf="selectedImage" [src]="selectedImage " alt="Selected Image" width="50%" height="50%"> -->
        </div>

        <!-- <div *ngIf="!selectedImage" class="file-container"> -->
        <div class="text-center">Drag File Here</div>

        <input class="form-control file" formControlName="file" name="file" type="file"
          (change)="onFileSelected($event);" #fileInput1 multiple />
        <!-- </div> -->





        <!-- <span class="errors" *ngIf="errorMsg2" -->
        <!-- >*File should less then 1MB -->
        <!-- </span> -->

        <!-- <span class="errors" *ngIf="errorMsg">*{{ errorMsg }}</span> -->

        <div class="text-center" *ngIf="selectedImage">
          <button type="submit" class="btn btn-primary my-4" (click)='onAdd(fileInput1,modal);modal.dismiss("cross")'>
            Add Image
          </button>
          <!--          
          <button
            *ngIf="UpdateActivate"
            type="button"
            class="btn btn-danger my-4"
            (click)="onCancel(modal); "
          >
            cancel
          </button> -->
        </div>
      </form>
    </div>

  </div>
</ng-template>


<!-- <div class="drop-container" ngxFileDrop (onFileDrop)="dropped($event)">
  <span class="drop-message">Drop your folder here or click to select.</span>

</div>

<div class="container-fluid mt--5">
  <div class="vehicles">

    <div class="text-center">

      <div class="btn-group">


        <div class="file-container btn">
          <span class="text-center">Upload</span>

          <input class="form-control file1 " name="file" type="file" (change)="onFileSelected($event);" #fileInput />
        </div>
        <input type="text" class="search" placeholder="Search name">

        <button class="btn refresh btn-success" (click)="search(fileInput)">Search</button>
        <button class="btn btn-primary add-dialog" (click)="openModel(content)">
          + Add
        </button>
      </div>


    </div>

    <div class="vehicle col-sm-4 pr-0 pl-0 text-center mt-5" *ngFor="let vehicle of Vehicles || allVehicles"
      (click)="openModel(content)">
      <img src="https://imgstockhub.in/main_carpet/{{  vehicle.image || vehicle   }}" alt="image" width="100%"
        height="75%" />
      <hr />
      <div>{{ vehicle.image || vehicle }}</div>
      <div>{{ vehicle.similarity_percentage || " " }} </div>
      <p *ngIf="vehicle.similarity_percentage"> %</p>
    </div>
  </div>
</div>
<h3 class="text-center" *ngIf="Vehicles?.length <= 0">No Data Found</h3> -->


<div>
  <hr>
  <h3>Porfoilio page</h3>
  <div><button class="btn btn-primary" *ngIf="!is_add_collection" (click)="onColletionAdd()">+ Collection</button>
    <div  *ngIf="is_add_collection">

      <input type="text" class="input m-3" placeholder="name" #collectionName>
      <button (click)="addCollection(collectionName.value)">add</button>
    </div>
  </div>

  <div class="demo">
    <div class="container">
      <div class="row">
        <div class="col-md-4 col-sm-6" *ngFor="let collection of collection_list">
          <div class="box" (click)="onCollection(collection)">
            <img src="https://bestjquery.com/tutorial/hover-effect/demo403/images/img-1.jpg" alt="Williamson Image">
            <div class="box-content">
              <h3 class="title">{{collection.name}}</h3>
              <span class="post">{{collection?.images?.length || 0}} images</span>
            </div>
            <ul class="icon">
              <li (click)="onother()"><a ><i class="fa fa-search"></i></a></li>
              <li (click)="onother()"><a><i class="fa fa-link"></i></a></li>
            </ul>
          </div>
        </div>


      </div>
      <div class="text-center p-5" *ngIf="collection_list.length <=0 ">
        Collections not found
      </div>
    </div>
  </div>


  <div>
    <hr>
    <h3>Collection page</h3>
    <div class="">
      <button class="btn btn-primary add-dialog" (click)="openModel(content)"  *ngIf="selected_collection">
        + Image
      </button>
    </div>
    <div class="demo">
      <div class="container">
        <div class="row">
          <div class="col-md-4 col-sm-6" *ngFor="let image of images_list">
            <div class="box" >
              <img  [src]="'https://imgstockhub.in/get_image?filename=' + user + '/'+ image" alt="Williamson Image" width="100%" height="100px">
              <div class="box-content">
                <h3 class="title">{{image}}</h3>
                <!-- <span class="post">{{collection?.images?.length || 0}} images</span> -->
              </div>
              <ul class="icon">
                <li (click)="imageDownload(user,image)"><a ><i class="fa fa-search">D</i></a></li>
                <li (click)="onother()"><a ><i class="fa fa-link"></i></a></li>
              </ul>
            </div>
          </div>


        </div>
        <div class="text-center p-5" *ngIf="images_list?.length <=0 ">
          images not found
        </div>
      </div>
    </div>


  </div>

  <div>
    <hr>
    <h3>Search page</h3>

    
    
    <div class="m-3 p-3 mb-5">
      <div class="row">
        <div class="col-md-4">
          <input class="form-control  " name="file" type="file" (change)="onFileSelected($event);" #fileInput />
        </div>      
          <div class="col-md-2">
            <button class="btn btn-secondary" (click)="search(fileInput)">Search</button>
          </div>
      </div>
      <div class="demo">
        <div class="container">
          <div class="row">
            <div class="col-md-4 col-sm-6" *ngFor="let image of similar_images_list">
              <div class="box" >
                <img  [src]="'https://imgstockhub.in/get_image?filename=' + user + '/'+ image.image" alt="Williamson Image" width="100%" height="100px">
                <div class="box-content">
                  <h3 class="title">{{image?.image}}</h3>
                  <span class="post">{{image?.similarity_percentage || 0}} %</span>
                  <span class="post" *ngIf="image?.similarity_percentage >= 95">Best Match</span>
                  <span class="post" *ngIf="image?.similarity_percentage < 95">Similar Match</span>
                </div>
                <ul class="icon">
                  <li (click)="imageDownload(user,image)"><a ><i class="fa fa-search">D</i></a></li>
                  <li (click)="onother()"><a ><i class="fa fa-link"></i></a></li>
                </ul>
              </div>
            </div>
  
  
          </div>
          <div class="text-center p-5" *ngIf="similar_images_list?.length <=0 ">
            images not found
          </div>
        </div>
      </div>
      
    </div>
  </div>
</div>

